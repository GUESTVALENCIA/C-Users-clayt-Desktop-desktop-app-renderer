// Patch for main.js to add Qwen BrowserView navigation functions
// This should be added to the main.js file

ipcMain.handle('qwen:navigate', async (_e, { action }) => {
  try {
    if (!qwenBrowserView || !qwenBrowserView.webContents) {
      return { success: false, error: 'Qwen BrowserView not available' };
    }

    switch (action) {
      case 'back':
        if (qwenBrowserView.webContents.canGoBack()) {
          qwenBrowserView.webContents.goBack();
          return { success: true };
        } else {
          return { success: false, error: 'Cannot go back' };
        }
      case 'forward':
        if (qwenBrowserView.webContents.canGoForward()) {
          qwenBrowserView.webContents.goForward();
          return { success: true };
        } else {
          return { success: false, error: 'Cannot go forward' };
        }
      default:
        return { success: false, error: 'Invalid navigation action' };
    }
  } catch (e) {
    console.error('[QWEN] Error in navigation:', e);
    return { success: false, error: e.message };
  }
});

ipcMain.handle('qwen:reload', async () => {
  try {
    if (!qwenBrowserView || !qwenBrowserView.webContents) {
      return { success: false, error: 'Qwen BrowserView not available' };
    }

    qwenBrowserView.webContents.reload();
    return { success: true };
  } catch (e) {
    console.error('[QWEN] Error reloading:', e);
    return { success: false, error: e.message };
  }
});